/* 
 * Effects & Animation Styles 
 * Theme: "Tiểu Yêu" (Little Demon) - Ink Wash & Paper Physics
 */

/* --- 1. Cinematic Character Animation (24fps feel) --- */
@keyframes breathe {

    0%,
    100% {
        transform: scale(1) translateY(0);
    }

    50% {
        transform: scale(1.02) translateY(-2px);
    }
}

.char-pig {
    /* Apply "breathing" idle state */
    animation: breathe 4s ease-in-out infinite;
    transform-origin: bottom center;
    transition: filter 0.3s;
}

.char-pig.stressed {
    animation: shake 0.5s steps(2) infinite;
    /* Nervous shaking */
    filter: sepia(0.5) hue-rotate(-30deg);
}

@keyframes shake {
    0% {
        transform: translate(1px, 1px) rotate(0deg);
    }

    10% {
        transform: translate(-1px, -2px) rotate(-1deg);
    }

    20% {
        transform: translate(-3px, 0px) rotate(1deg);
    }

    30% {
        transform: translate(3px, 2px) rotate(0deg);
    }

    40% {
        transform: translate(1px, -1px) rotate(1deg);
    }

    50% {
        transform: translate(-1px, 2px) rotate(-1deg);
    }

    60% {
        transform: translate(-3px, 1px) rotate(0deg);
    }

    70% {
        transform: translate(3px, 1px) rotate(-1deg);
    }

    80% {
        transform: translate(-1px, -1px) rotate(1deg);
    }

    90% {
        transform: translate(1px, 2px) rotate(0deg);
    }

    100% {
        transform: translate(1px, -2px) rotate(-1deg);
    }
}

/* --- 2. Button "Jelly" Interactions --- */
.btn-action,
.dock-btn,
.task-btn {
    transition: transform 0.1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.btn-action:active,
.dock-btn:active,
.task-btn:active {
    transform: scale(0.9);
}

.btn-action:hover {
    transform: scale(1.05);
}

/* --- 3. Modal "Unrolling" Transition --- */
.modal-content {
    /* Override existing transform for entrance */
    transform-origin: top center;
    animation: unroll 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes unroll {
    0% {
        transform: scaleY(0.1) scaleX(0.8);
        opacity: 0;
    }

    100% {
        transform: scaleY(1) scaleX(1);
        opacity: 1;
    }
}

/* --- 4. Particle System --- */
#particles-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 150;
    /* Above regular UI but below Modals(200) */
    overflow: hidden;
}

.particle {
    position: absolute;
    will-change: transform, opacity;
    pointer-events: none;
    font-family: 'Pangolin', cursive;
    font-weight: bold;
    text-shadow: 1px 1px 0 #fff;
}

/* Floating Text (Damage Numbers) */
.particle.text-popup {
    color: #d32f2f;
    font-size: 24px;
    animation: floatUpFade 1s forwards;
}

/* Critical Hit */
.particle.crit {
    color: #ffca28;
    font-size: 32px;
    font-weight: 900;
    text-shadow: 2px 2px 0 #b71c1c;
    animation: explodeFade 0.8s forwards;
}

/* Sweat Drops (Stress) */
.particle.sweat {
    width: 10px;
    height: 10px;
    background: #e3f2fd;
    border-radius: 50% 50% 50% 0;
    transform: rotate(-45deg);
    animation: dropFall 1.5s linear forwards;
    opacity: 0.8;
}

@keyframes floatUpFade {
    0% {
        transform: translateY(0) scale(1);
        opacity: 1;
    }

    100% {
        transform: translateY(-50px) scale(1.2);
        opacity: 0;
    }
}

@keyframes explodeFade {
    0% {
        transform: scale(0.5);
        opacity: 0;
    }

    50% {
        transform: scale(1.5);
        opacity: 1;
    }

    100% {
        transform: scale(1);
        opacity: 0;
    }
}

/* --- 5. Lottie Containers --- */
.lottie-wrapper {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Specific Lottie Overlays */
#success-lottie {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 300px;
    height: 300px;
    z-index: 300;
    pointer-events: none;
}